# OnionTopologySuite
Expose parts of NetTopologySuite as [Manifold](https://manifold.net) SQL functions

## Using
Download add-in [(link)](https://github.com/rkolka/OnionTopologySuite/blob/master/OnionTopologySuite.zip) and unpack it under ~\shared\.

Import these files:
* OnionTopologySuiteWKB.sql
* OnionTopologySuiteGEOM.sql

and include OnionTopologySuiteGEOM in your queries.
```sql
-- $manifold$
-- $include$ [OnionTopologySuiteGEOM]

...your query...
```

You can also look at OnionTopologySuiteTest.sql and OnionTopologySuite.map

## Developing
Almost mechanically converted all functions from NetTopologySuite\test\NetTopologySuite.TestRunner\Functions.
Some are duplicates or don't even make much sense in Manifold. 

## List of functions
For details, study code comments [here](https://github.com/NetTopologySuite/NetTopologySuite/tree/c838c5061aa0f13d1fa65f828a868d790302ec06/test/NetTopologySuite.TestRunner/Functions)
* NTSTransformByVectors(@geom, @geomcontrol)
* NTSTransformByBaseline(@geom, @geomdestBaseline)
* NTSScale(@geom, @scale)
* NTSReflectInX(@geom)
* NTSReflectInY(@geom)
* NTSRotate(@geom, @multipleOfPi)
* NTSTranslateCentreToOrigin(@geom)
* NTSTranslateToOrigin(@geom)
* NTSBoundary(@geom)
* NTSBoundaryMod2(@geom)
* NTSBoundaryEndpoint(@geom)
* NTSBoundaryMonoValentEnd(@geom)
* NTSBoundaryMultiValentEnd(@geom)
* NTSComponentBuffers(@geom, @distance)
* NTSBufferByComponents(@geom, @distance)
* NTSBufferBySegments(@geom, @distance)
* NTSBufferByChains(@geom, @distance, @maxChainSize)
* NTSBuffer(@geom, @distance)
* NTSBufferWithParams(@geom, @distance, @quadrantSegments, @capStyle, @joinStyle, @mitreLimit)
* NTSBufferWithSimplify(@geom, @distance, @simplifyFactor)
* NTSBufferOffsetCurve(@geom, @distance)
* NTSBufferOffsetCurveWithParams(@geom, @distance, @quadrantSegments, @capStyle, @joinStyle, @mitreLimit)
* NTSBufferLineSimplifier(@geom, @distance)
* NTSBufferValidated(@geom, @distance)
* NTSBufferValidatedGeom(@geom, @distance)
* NTSSingleSidedBufferCurve(@geom, @distance)
* NTSSingleSidedBuffer(@geom, @distance)
* NTSBufferEach(@geom, @distance)
* NTSVariableBuffer(@geomline, @startDist, @endDist)
* NTSVariableBufferMid(@geomline, @startDist, @midDist)
* NTSOrientationIndex(@geomsegment, @geomptGeom)
* NTSOrientationIndexDd(@geomsegment, @geomptGeom)
* NTSSegmentIntersects(@geomg1, @geomg2)
* NTSSegmentIntersection(@geomg1, @geomg2)
* NTSSegmentIntersectionDd(@geomg1, @geomg2)
* NTSOctagonalEnvelope(@geom)
* NTSMinimumDiameter(@geom)
* NTSMinimumDiameterLength(@geom)
* NTSMinimumRectangle(@geom)
* NTSMinimumBoundingCircle(@geom)
* NTSMinimumBoundingCircleDiameterLength(@geom)
* NTSMaximumDiameter(@geom)
* NTSMaximumDiameterLength(@geom)
* NTSBoundary(@geom)
* NTSConvexHull(@geom)
* NTSCentroid(@geom)
* NTSInteriorPoint(@geom)
* NTSDensify(@geom, @distance)
* NTSExtractLines(@geom)
* NTSPointsToLine(@geom)
* NTSLineToPolygon(@geom)
* NTSToPoints(@geom1, @geom2)
* NTSToLines(@geom1, @geom2)
* NTSToGeometryCollection(@geom, @geom2)
* NTSRandomPointsInGrid(@geom, @nPts)
* NTSRandomPoints(@geom, @nPts)
* NTSRandomRadialPoints(@geom, @nPts)
* NTSHaltonPoints(@geom, @nPts)
* NTSHaltonPoints57(@geom, @nPts)
* NTSHaltonPointsWithBases(@geom, @nPts, @basei, @basej)
* NTSRandomSegments(@geom, @nPts)
* NTSRandomSegmentsInGrid(@geom, @nPts)
* NTSRandomLineString(@geom, @nPts)
* NTSRandomRectilinearWalk(@geom, @nPts)
* NTSGrid(@geom, @nCells)
* NTSGridPoints(@geom, @nCells)
* NTSSupercircle3(@geom, @nPts)
* NTSSquircle(@geom, @nPts)
* NTSSupercircle5(@geom, @nPts)
* NTSSupercirclePoint5(@geom, @nPts)
* NTSSupercircle(@geom, @nPts, @pow)
* NTSPointFieldCentroidStar(@geomptsGeom)
* NTSPointFieldStar(@geomptsGeom, @geomcentrePt)
* NTSDiffVerticesBoth(@geoma, @geomb)
* NTSDiffVertices(@geoma, @geomb)
* NTSDiffSegments(@geoma, @geomb)
* NTSDiffSegmentsBoth(@geoma, @geomb)
* NTSDuplicateSegments(@geoma)
* NTSSingleSegments(@geoma)
* NTSDissolve(@geom)
* NTSDistance(@geoma, @geomb)
* NTSIsWithinDistance(@geoma, @geomb, @dist)
* NTSNearestPoints(@geoma, @geomb)
* NTSDiscreteHausdorffDistanceLine(@geoma, @geomb)
* NTSDensifiedDiscreteHausdorffDistanceLine(@geoma, @geomb, @frac)
* NTSDiscreteOrientedHausdorffDistanceLine(@geoma, @geomb)
* NTSDiscreteHausdorffDistance(@geoma, @geomb)
* NTSDiscreteOrientedHausdorffDistance(@geoma, @geomb)
* NTSDistanceIndexed(@geoma, @geomb)
* NTSNearestPointsIndexed(@geoma, @geomb)
* NTSNearestPointsIndexedAll(@geoma, @geomb)
* NTSAddHole(@geompolyGeom, @geomhole)
* NTSLength(@geom)
* NTSArea(@geom)
* NTSIsCCW(@geom)
* NTSIsSimple(@geom)
* NTSIsValid(@geom)
* NTSIsRectangle(@geom)
* NTSIsClosed(@geom)
* NTSEnvelope(@geom)
* NTSReverse(@geom)
* NTSNormalize(@geom)
* NTSSnap(@geom, @geom2, @distance)
* NTSGetGeometryN(@geom, @i)
* NTSGetPolygonShell(@geom)
* NTSGetPolygonHoles(@geom)
* NTSGetPolygonHoleN(@geom, @i)
* NTSGetCoordinates(@geom)
* NTSExtractPoint(@geom, @index)
* NTSExtractLine(@geom, @start, @end)
* NTSProject(@geom, @geom2)
* NTSProjectIndex(@geom, @geom2)
* NTSMergeLines(@geom)
* NTSSequenceLines(@geom)
* NTSExtractLines(@geom)
* NTSExtractSegments(@geom)
* NTSExtractChains(@geom, @maxChainSize)
* NTSDissolve(@geom)
* NTSSegmentIntersects(@geom1, @geom2)
* NTSSegmentIntersection(@geom1, @geom2)
* NTSSegmentIntersectionDd(@geom1, @geom2)
* NTSLineIntersection(@geom1, @geom2)
* NTSLineIntersectionDD(@geom1, @geom2)
* NTSReflectPoint(@geom1, @geom2)
* NTSIsNodingValid(@geom)
* NTSIsSegmentNodingValid(@geom)
* NTSFindOneNode(@geom)
* NTSFindNodes(@geom)
* NTSFindInteriorNodes(@geom)
* NTSIntersectionCount(@geom)
* NTSInteriorIntersectionCount(@geom)
* NTSMCIndexNodingWithPrecision(@geom, @scaleFactor)
* NTSMCIndexNoding(@geom)
* NTSSnapRoundWithPrecision(@geom, @scaleFactor)
* NTSScaledNoding(@geom, @scaleFactor)
* NTSLogoLines(@geom)
* NTSLogoBuffer(@geom, @distance)
* NTSIntersection(@geoma, @geomb)
* NTSUnion(@geoma, @geomb)
* NTSSymDifference(@geoma, @geomb)
* NTSDifference(@geoma, @geomb)
* NTSDifferenceBa(@geoma, @geomb)
* NTSUnaryUnion(@geoma)
* NTSUnionUsingGeometryCollection(@geoma, @geomb)
* NTSClip(@geoma, @geommask)
* NTSPolygonize(@geom)
* NTSPolygonizeValidPolygonal(@geom)
* NTSPolygonizeDangles(@geom)
* NTSPolygonizeCutEdges(@geom)
* NTSPolygonizeInvalidRingLines(@geom)
* NTSPolygonizeAllErrors(@geom)
* NTSReducePrecisionPointwise(@geom, @scaleFactor)
* NTSIntersects(@geoma, @geommask)
* NTSCovers(@geoma, @geommask)
* NTSCoveredBy(@geoma, @geommask)
* NTSDisjoint(@geoma, @geommask)
* NTSValid(@geoma)
* NTSInvalid(@geoma)
* NTSAreaGreater(@geoma, @minArea)
* NTSAreaZero(@geoma)
* NTSWithin(@geoma, @geommask)
* NTSInteriorPointWithin(@geoma, @geommask)
* NTSwithinDistance(@geoma, @geommask, @maximumDistance)
* NTSwithinDistanceIndexed(@geoma, @geommask, @maximumDistance)
* NTSFirstNComponents(@geom, @n)
* NTSSimplifyDp(@geom, @distance)
* NTSSimplifyTp(@geom, @distance)
* NTSSimplifyVW(@geom, @distance)
* NTSSortByLength(@geom)
* NTSSortByArea(@geom)
* NTSSortByHilbertCode(@geom)
* NTSSortByMortonCode(@geom)
* NTSKdTreeQuery(@geompts, @geomquery, @tolerance)
* NTSKdTreeQueryRepeated(@geompts, @geomqueryEnv, @tolerance)
* NTSSTRtreeBounds(@geoms)
* NTSSTRtreeQuery(@geoms, @geomqueryEnv)
* NTSStrTreeNN(@geoms, @geom)
* NTSStrTreeNNInSet(@geoms)
* NTSStrTreeNNk(@geoms, @geom, @k)
* NTSQuadTreeQuery(@geoms, @geomqueryEnv)
* NTSMonotoneChains(@geom)
* NTSCentroid(@geom)
* NTSCircumcentre(@geom)
* NTSCircumcentreDD(@geom)
* NTSPerpendicularBisectors(@geom)
* NTSInCentre(@geom)
* NTSAngleBisectors(@geom)
* NTSInvalidLocations(@geom)
* NTSInvalidGeoms(@geom)
